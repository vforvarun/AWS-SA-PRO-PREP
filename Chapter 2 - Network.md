- Pre-requisites
    - Physical Layout of AZs and Regions
    - VPC Concept and how to create
    - Create private and public subnets
    - What a NAT is and what "Disable source/destination checks" mean
    - Route table and routing terminology (default routes, local routes)
    - IPv4 Addressing and Subnet Mask notation (/16, /24, etc)
    - Intermediate Networking Terminology (MAC Address, Port, Gateways vs Router)


- Concepts
    - OSI Model
      - 1. Physical -> Cat 5, Fiber Optic Cable, 5GZ -> Bits -> Please
      - 2. Data Link -> MAC Address -> Frame -> Do
      - 3. Network -> IP, ARP -> Packet -> Not
      - 4. Transport -> TCP -> Segment (TCP) / Datagram (UDP) -> Throw
      - 5. Session -> Setup, Negotiation and Teardown -> Sausage
      - 6. Presentation -> TLS/SSL, Compression -> Pizza
      - 7. Application -> Web Browser -> Away
    - AWS doesn't allow multicast
      - Unicast: More like phone call. 1x1 conversation, no impact to anyone else on the line.
      - Multicast: Shouting over a mega phone to everyone. Network card sending packets to everyone.
    - TCP vs UDP vs ICMP
      - TCP
        - Connection-based, stateful, acknowledges receipt
        - Analogy: After everything I say, I want you to confirm that you received it.
        - Uses: Web, Email, File Transfer
      - UDP
        - Connectionless, stateless, simple, no retransmission delays
        - Analogy: I'm going start talking and its OK if you miss some words.
        - Uses: Streaming media, DNS.
      - ICMP
        - Generally by network devices to exchange info
        - We routers can talk to each other about network health in our own language.
        - traceroute, ping
      - Ephemeral Ports
        - Short-lived transport protocol ports used in IP communications
        - Above the "well known" IP Port (above 1024)
        - Also called as Dynamic Ports
        - Suggested range is 49152 to 65535 but
          - Linux Kernels generally use 32568 to 61000
          - Windows platforms default from 1025
        - There are some NACL and Security Group implications

      - Simple Communication Scenario:
        - Web Server on 192.168.1.2 waits for connections on Port 80
        - Client on 192.168.1.6 initiates a connection to port 80 for a HTTP Session
        - Server responds "Hello, this is Server"
        - Client says "Hi, I'm client 6. You can use port 56784 to sent back what I request"
        - Server responds "Ok, will do. Here's your webpage and I'll keep your session open"
        - Client Requests another webpage
        - Server responds "Hey, I know you, I'll send you the data over the existing session"

      - AWS Availability Zones
        - The Physical to Logical assignment of AZs is done at the Account level

      - Network to VPC Connectivity
        - AWS Managed VPN
          - What: AWS managed IPsec VPN Connection over existing Internet Connection
          - When: Quick and usually simple way to establish a secure tunneled connection to a VPC; Redundant link for Direct Connect or other VPC VPN
          - Pros: Supports static routes or BGP Peering and routing
          - Cons: Dependent on your Internet Connection
          - How to create:
            - On AWS side
              - Create Virtual Private Gateway and attach to desired VPC
              - Create Customer Gateway on AWS
              - Create VPN Connection, linking Virtual Private Gateway with Customer Gateway
              - Download Customer Gateway config
            - On Customer side
              - Configure router to connect to AWS VPN Connection
              - Configure BGP routing (if needed)
        - AWS Direct Connect
          - What: Dedicated network connection over private lines into AWS backbone
          - When: Require a "big pipe" into AWS; lots of resources and services being provided on AWS to corporate users
          - Pros
            - More predictable network performance
            - Potential bandwidth cost reduction
            - Up to 10GBps provisioned connections
            - Supports BGP Peering and routing
          - Cons: May require additional telcom and hosting provider relationships and/or new network circuits.
          - How:
            - Work with your existing Data Provider
            - Create Virtual Interfaces (VIF) to connect to VPCs (Private VIF) or other AWS service like S3 or Glacier (Public VIF).

        - AWS Direct Connect + VPN
        - AWS VPN CloudHub
        - Software VPN
        - Transit VPC

      - Internet Gateways
        - Horizontally scaled, redundant and highly available component that allows communication between the VPC and the Internet.
        - No availability risk or bandwidth constraints
        - If the subnet is associated with a route to the Internet, then it is a public subnet
        - Support IPv4 and IPv6
        - Serves two purposes
          - Provide route table target for Internet-bound traffic
          - Perform NAT for instances with public IP addresses. It does not perform NAT for instances with Private IP's only.
      - Egress only Internet Gateways
        - For IPv6 Only,  IPv6 addresses are globally unique and are therefore public by default
        - Provides outbound Internet access for IPv6 addressed instances.
        - Prevents inbound Internet access to those IPv6 instances.
        - Stateful - forwards traffic from instance to internet and then sends back the response.
        - Must create a custom route for ::/0 to the Egress-Only Internet Gateway
        - Use Egress-Only Internet Gateway instead of NAT for IPv6
      - NAT Instance
        - EC2 instance from a special AWS-provided AMI
        - Translate traffic from many private IP instance to a single public IP and back
        - Doesn't allow public internet initiated connections into private instances
        - Not supported for IPv6 (use Egress-Only Gateway)
        - NAT Instance must live on a public subnet with a route to Internet Gateway
        - Private Instances in a private subnet must have route to the NAT instance, usually the default route destination of 0.0.0.0/0
      - NAT Gateway
        - Fully-managed NAT service that replaces the need for NAT Instance on EC2
        - Must be created in a Public Subnet
        - Uses an Elastic IP for public IP for the life of the gateway
        - Private instances in a private subnet must have route to the NAT instance, usually default route destination of 0.0.0.0/0
        - Created in specified AZ with redundancy in that zone.
        - For multi-AZ redundance, create NAT Gateways in each AZ with routes for private subnets to use the local Gateway.
        - Up to 5Gbps bandwidth that can scale up to 45 5Gbps
        - Can't use a NAT Gateway to access VPC peering, VPN or Direct Connect, so be sure to include specific routes to those in your route table (always most specific route is selected first)
      - NAT Instance vs Gateway
        - Availability
          - NAT Gateway: Highly available within AZ
          - NAT Instance: On your own
        - Bandwidth
          - NAT Gateway: Up to 45 Gbps
          - NAT Instance: Depends on bandwidth of instance type
        - Maintenance
          - NAT Gateway: Managed by AWS
          - NAT Instance: On your own
        - Performance
          - NAT Gateway: Optimized for NAT
          - NAT Instance: Amazon Linux AMI configured to perform NAT
        - Public IP
          - NAT Gateway: Elastic IP that cannot be detached
          - NAT Instance: Elastic IP that can be detached
        - Security Groups
          - NAT Gateway: Cannot be associated with NAT Gateway
          - NAT Instance: Can use Security Groups
        - Bastion Server
          - NAT Gateway: Not Supported
          - NAT Instance: Can be used as bastion server
      - Routing
        - VPC Context
          - Route Tables
            - VPCs have an implicit router and main route table
            - Main routing table can be modified or new tables can be created
            - Each route table contains a local route for the CIDR block
            - Most specific route for an address wins
          - Border Gateway Protocol
            - Popular routing protocol for the Internet
            - "Propagates" information about the network to allow for dynamic routing
            - Required for Direct Connect and optional for VPN
            - Alternative of not using BGP with AWS VPC is static routes
            - AWS supports BGP community tagging as a way to control traffic scope and route preference
            - Required TCP port 179 + ephemeral ports
            - Autonomous System Number (ASN) = Unique endpoint identifier
            - Weighting is local to the router and higher weight is preferred path for outbound traffic
        - Enhanced Networking
          - Generally used for High Performance Computing use-cases
          - Uses single root I/O virtualisation (SR-IOV) to deliver higher performance than traditional virtualised network interfaces
          - Might have to install driver if other than Amazon Linux HVM AMI
          - Intel 82599 VF Interface: 10 Gbps
          - Elastic Network Adapter: 25 Gbps  
